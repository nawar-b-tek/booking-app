<ion-content class="user-home-page">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-overlay">
      <div class="hero-content">
        <div class="welcome-header">
          <ion-icon name="person-circle-outline"></ion-icon>
          <h1>Welcome Back!</h1>
        </div>
        <p class="hero-subtitle">Manage your bookings and explore new properties tailored for you</p>
        
        <!-- Quick Actions -->
        <div class="quick-actions">
          <ion-button routerLink="/reservations" class="action-btn">
            <ion-icon slot="start" name="calendar-outline"></ion-icon>
            My Reservations
          </ion-button>
          <ion-button routerLink="/post-ad" class="action-btn" fill="outline">
            <ion-icon slot="start" name="add-circle-outline"></ion-icon>
            Post an Ad
          </ion-button>
        </div>
      </div>
    </div>
  </section>

  <!-- Stats Section -->
  <section class="stats-section">
    <div class="stats-container">
      <div class="stat-card">
        <ion-icon name="calendar-outline"></ion-icon>
        <div class="stat-info">
          <h3>0</h3>
          <p>Active Reservations</p>
        </div>
      </div>
      <div class="stat-card">
        <ion-icon name="home-outline"></ion-icon>
        <div class="stat-info">
          <h3>0</h3>
          <p>My Listings</p>
        </div>
      </div>
      <div class="stat-card">
        <ion-icon name="star-outline"></ion-icon>
        <div class="stat-info">
          <h3>0</h3>
          <p>Favorites</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Announcements Section -->
  <section class="annonces-section">
    <div class="section-header">
      <h2>Latest Announcements</h2>
      <p>Tap an announcement to see more details</p>
    </div>

    <!-- Error Message -->
    <ion-card *ngIf="errorMessage" class="error-card">
      <ion-card-content>
        <ion-icon name="warning-outline"></ion-icon>
        <p>{{ errorMessage }}</p>
      </ion-card-content>
    </ion-card>

    <!-- Announcements Grid -->
    <div class="annonces-grid" *ngIf="annonces$ | async as annonces; else loading">
      <ion-card
        *ngFor="let annonce of annonces"
        [routerLink]="['/annonces', annonce.id]"
        class="annonce-card"
      >
        <!-- Image -->
        <div class="card-image" *ngIf="annonce.photos && annonce.photos.length > 0">
          <img [src]="annonce.photos[0]" alt="Property photo" />
          
          <!-- Price Badge -->
          <div class="card-badge" *ngIf="annonce.price">
            {{ annonce.price | currency: 'TND' : 'symbol' : '1.0-0' }} / day
          </div>
        </div>
        
        <ion-card-content>
          <!-- Title -->
          <h3>{{ annonce.title || 'Untitled announcement' }}</h3>
          
          <!-- Description -->
          <p class="description" *ngIf="annonce.description">
            {{ annonce.description }}
          </p>
          
          <!-- View Details Link -->
          <div class="card-footer">
            <span class="view-link">
              View details
              <ion-icon name="arrow-forward-outline"></ion-icon>
            </span>
          </div>
        </ion-card-content>
      </ion-card>

      <!-- Empty State -->
      <ion-card *ngIf="!annonces || annonces.length === 0" class="empty-card">
        <ion-card-content>
          <ion-icon name="home-outline"></ion-icon>
          <h3>No announcements available</h3>
          <p>Be the first to post an announcement!</p>
          <ion-button routerLink="/post-ad" class="post-btn">
            <ion-icon slot="start" name="add-outline"></ion-icon>
            Post an Announcement
          </ion-button>
        </ion-card-content>
      </ion-card>
    </div>
  </section>

  <!-- Loading Template -->
  <ng-template #loading>
    <div class="loading-container">
      <ion-spinner name="crescent" color="primary"></ion-spinner>
      <p>Loading announcements...</p>
    </div>
  </ng-template>
</ion-content>
